# iOSショートカット + PWA運用ガイド

このガイドは、iPhoneで「サッと録音 -> サッとメモ」を安定運用するための実務向け手順です。

## 1. PWAとして使う（必須）

1. Safariで `https://gatyoukatyou.github.io/ai-meeting-assistant/` を開く
2. 共有ボタン（`□↑`）をタップ
3. `ホーム画面に追加` を選ぶ
4. ホーム画面のアイコンから起動する

推奨理由:
- URLバーやタブの誤操作が減る
- 会議前にワンタップで起動できる
- 通常のSafariタブ運用より手順が安定する

## 2. iOS運用の注意点

- 録音前にマイク許可を確認する（初回のみ許可ダイアログ）
- バックグラウンド長時間放置は避ける（iOSの省電力制御で停止する場合あり）
- 低電力モード中は長時間録音の安定性が下がることがある
- 会議開始直前に一度だけテスト録音して動作確認すると事故を減らせる

## 3. iOSショートカット雛形

DoDの「録音 -> 文字起こし -> 要約/TODO -> コピー or 保存」を満たすため、2パターン用意します。

### A. APIキー不要の最小雛形（最速）

用途: 30秒で形にしたいとき。  
精度: iOSの音声入力品質に依存。

推奨アクション構成:
1. `音声を入力`（日本語）
2. `テキスト`（以下テンプレを挿入）
3. `ChatGPTに尋ねる`（または同等LLMアクション）
4. `結果をメニューから選択`
  - `クリップボードにコピー`
  - `ファイルを保存`
  - `メモに追加`

テンプレ（そのまま使用可）:

```text
以下の会議メモを要約し、TODOを抽出してください。

出力形式:
## 要約
- ...
## TODO
- [ ] 担当 / 期限 / 内容

会議メモ:
{{音声入力結果}}
```

### B. BYOK/API型の雛形（高精度）

用途: 音声入力より安定した文字起こしが必要なとき。  
精度: 利用するSTT/LLM API品質に依存。

推奨アクション構成:
1. `音声を録音`（変数 `audio_file`）
2. `URL` = STTエンドポイント（例: OpenAI Transcriptions）
3. `URLの内容を取得`（`POST` / 認証ヘッダー / `audio_file` を送信）
4. `辞書の値を取得`（`text`）
5. `URLの内容を取得`（LLMで要約/TODO抽出）
6. `結果をメニューから選択`
  - `クリップボードにコピー`
  - `ファイルを保存`

セキュリティ注意:
- APIキーをショートカットに直書きする場合は、共有前に必ず削除
- 共有端末では使用しない
- このアプリ本体と同様、鍵管理は自己責任

## 4. このアプリとの連携フロー（推奨）

1. PWA版 `AI参加会議` を起動
2. iOSショートカットで要約/TODOを作成
3. 必要ならこのアプリの `Q&A` や `メモ` に貼り付け
4. `エクスポート` で Markdown と AI Work Order を作成

## 5. トラブルシュート

- 症状: 録音できない  
  対応: iOS設定 -> Safari -> マイク許可を確認、アプリを再起動

- 症状: ショートカットで保存できない  
  対応: `ファイルを保存` の保存先を `iCloud Drive/Shortcuts` に固定

- 症状: 出力フォーマットが崩れる  
  対応: ショートカット内プロンプトを固定し、自由入力を減らす

---

英語版簡易要約:
- Add to Home Screen (PWA) for stable one-tap launch.
- Use Shortcut Template A (no API key) for fastest setup.
- Use Template B (BYOK/API) when transcription quality is critical.
- Keep API keys out of shared shortcuts and shared devices.
