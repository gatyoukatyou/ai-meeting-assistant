# Changelog

このプロジェクトの変更履歴です。
フォーマットは [Keep a Changelog](https://keepachangelog.com/) に準拠し、バージョンは SemVer を意識しています。

---

## v1.4.0 (2026-02-04) - テーマ拡張 & モバイル/品質強化

### Added
- **スキン/テーマ切替**: Paper / Clean / CLI を追加（CLIはレトロターミナル風）
- **アクセントカラー再編**: 6色→9色へ拡張、lime/cyan を廃止し amber/terracotta 系へ移行
- **PC表示最適化**: 編集モードでコンテンツ幅を拡大（最大 1800px）

### Changed
- **ヘッダー整理**: モバイルで3ボタン構成に簡略化、マイクアイコン刷新
- **ボトムタブ改善**: タップ領域拡大、テーマカラー反映

### Fixed
- **iOS Safari**: ボトムタブのタップ不具合を修正 (#76)
- **モバイル**: STTステータスチップ非表示化でヘッダー高さ削減 (#74, #79)
- **設定同期**: 設定保存時にメインタブへAPIキー即時反映 (#81)
- **料金/モデル同期**: fixedModels ↔ PRICING の同期チェックを堅牢化 (#34)
- **エクスポートプリセット**: モーダル表示時のボタンハンドラー修正
- **タブアクションボタン**: セレクタ誤り修正 (#69, #70)
- **LLMタイムアウト**: 複数の軽微なバグ修正 (#72)

### Security
- **APIキー完全セッション化**: 永続化・難読化オプション撤去、セッション限定へ統一 (#78)
- **Security CI導入**: CodeQL / gitleaks / dependency-review を追加 (#83)
- **XORレガシーコード削除** (#56)

### Other
- **アプリロゴ刷新**: 新ロボットマスコットデザインに更新
- **録音なし会議モード**: 録音せずテキスト入力のみで会議モード使用可能に (#77)

---

## v1.3.0 (2026-01-31) - タイムライン & 会議モード

### Added
- **メモ/TODOタイムライン**: メモ追加、TODO化、ピン留め、検索/フィルタに対応
- **相談タブ**: 意見+アイデアを統合したAI相談機能
- **会議モード**: 集中表示と編集モードの切替（録音中のフォーカス画面）
- **添付資料強化**: TXT/MD/PDF/DOCX/CSV の抽出に対応 (#38)
- **Native Docs**: GeminiでPDFを原文送信（失敗時はテキスト抽出にフォールバック）(#37)
- **Thinking強化**: Claude対応モデルでExtended thinkingを有効化 (#37)
- **モデル自動検出**: A+Bモデル自動検出とフォールバック (#59, #62)
- **スキン切替**: Brutalism / Paper から選択可能
- **CIスモークテスト**: Playwright による UI smoke check (#53, #61)

### Changed
- **コスト表示のチップ化**: クリックで詳細ポップオーバーを表示
- **エクスポート拡張**: 相談/メモ/TODOを出力に追加

### Fixed
- **ログのAPIキー秘匿化**: エラーログ出力時にAPIキーパターンを自動マスク (#47)
- **セッション限定コンテキスト**: 会議コンテキストをデフォルトでsessionStorageに変更 (#48)
- **escapeHtml重複修正**: i18nキー不足も同時修正 (#28)
- **モバイルモーダルスクロール**: 背景スクロール防止

### Security
- **APIキーをセッション限定に変更**: デフォルトでsessionStorageに保存
- **PII/文字起こしログ無効化**: デフォルトでオフに (#47)
- **致命的エラー復旧UI**: セッションリセット/再読み込みを提示 (#45)

---

## v1.2.0 (2026-01-09) - 履歴復元 & MDインポート

### Added
- **履歴からの復元機能**: 保存済み履歴から文字起こし・AI回答を再読み込み (#22)
- **MDファイルインポート**: エクスポートしたMDファイルからデータを読み込み (#23)
- **会議コンテキストのファイル添付**: TXT/MD資料をAIに共有 (#26)

### Changed
- **コンテキスト自動注入**: 目的/参考資料を全AIリクエストに付加
- **エクスポートファイル名改善**: `[会議タイトル]-YYYY-MM-DD.md` 形式に変更

### Fixed
- **CSP対応**: ファイル削除のinline onclick を廃止しイベント委譲へ変更
- **エクスポートヘッダー**: 会議タイトルをMarkdownヘッダーに反映 (#21)

---

## v1.1.0 (2026-01-07) - 録音継続 & 履歴機能

### Added
- **LLMクイック設定モーダル**: 録音中でもLLM設定を変更可能 (#12, #17)
- **会議履歴機能**: 過去の会議記録をIndexedDBに自動保存（最大5件）(#13, #15)
- **会議コンテキスト入力**: 会議の目的・背景情報を事前設定 (#14, #16)

### Changed
- **設定画面へのアクセス方法変更**: ポップアップウィンドウで開くように変更

### Fixed
- **iOS Safariエクスポート**: Markdownファイルダウンロード対応 (#11)

---

## v1.0.0 (2025-12-30) - 初回安定版リリース

### Added
- **ダークモード**: ライト/ダーク切替、クロスタブ同期対応
- **カスタムモデル入力**: 各LLMプロバイダーで任意のモデル名を指定可能
- **法的ドキュメント整備（JP/EN）**: 利用規約・プライバシー等の二言語版

### Changed
- **ヘッダー2行レイアウト**: UX改善のためヘッダーを再設計
- **Deepgram UI整合**: WebSocket方式選択時に送信間隔設定を無効化

### Fixed
- **AssemblyAI無効化**: ブラウザCORS制限により一時無効化
- **テーマ堅牢性向上**: ライト/ダーク切替の安定性改善

---

## v0.9.1 (2025-12-28) - セキュリティ修正 & テーマ機能

### Added
- **アクセントカラーテーマ**: 6色（Sky, Indigo, Emerald, Violet, Slate, Coral）から選択可能

### Security
- **XSS脆弱性修正**: toast / error描画のinnerHTML問題を修正（P0）
- **プロンプト長制限**: 50,000文字上限を追加
- **BYOK警告追加**: READMEにAPIキー管理の注意事項を明記

---

## v0.9.0 (2025-12-xx) - PWA化 & スマホ最適化

### Added
- **PWA対応**: ホーム画面に追加してアプリとして使用可能
- **複数STTプロバイダー**: OpenAI Whisper / Deepgram 対応
- **ユーザー辞書UI**: カスタム用語ヒントの登録機能
- **議事録機能**: エクスポート順序の最適化
- **トリム機能**: 文字起こしから不要部分を除外

### Fixed
- **iOS Safari互換性**: optional chaining構文削除、タッチイベント対応
- **STT信頼性向上**: キュー処理の競合状態を解消

---

## v0.8.0 (2025-12-xx) - リアルタイム性向上

### Added
- **リアルタイムSTT**: Deepgram WebSocket対応（真のリアルタイム）

### Fixed
- **音声収集**: MediaRecorder.start()にtimeslice追加
- **Gemini音声文字起こし**: 400 INVALID_ARGUMENT エラー修正

---

## v0.6.0 (2025-12-xx) - 初期公開

### Added
- **マルチプロバイダー対応**: Gemini / Claude / OpenAI / Groq
- **リアルタイム文字起こし**: OpenAI Whisper（チャンク送信）
- **AI回答機能**: 要約・意見・アイデア・Q&A・議事録
- **コスト表示**: STT/LLMの推定コストをリアルタイム表示
- **Markdownエクスポート**: 会議内容とAI回答をファイル保存
- **設定画面分離**: config.html として独立
- **CSP対応**: スクリプト外部化、nonce-free CSP適用

### Security
- **DOM hardening**: XSS対策、URL検証ガード
- **APIキー暗号化保存**: ブラウザローカルのみ
