# 変更履歴

## [Unreleased]

- （なし）

---

## v1.3.0 (2026-01-30) - タイムライン & 会議モード

### 機能追加

- **メモ/TODOタイムライン**: メモ追加、TODO化、ピン留め、検索/フィルタに対応
- **相談タブ**: 意見+アイデアを統合したAI相談（要約/議事録/自由質問は継続）
- **会議モード**: 集中表示と編集モードの切替（録音中のフォーカス画面）
- **会議コンテキスト拡張**: 参加者・役割、引き継ぎ/前提の入力欄を追加
- **添付資料強化**: TXT/MD/PDF/DOCX/CSVの抽出に対応
- **Native Docs**: GeminiでPDFを原文送信（失敗時はテキスト抽出にフォールバック）
- **Thinking強化**: Claude対応モデルでExtended thinkingを有効化
- **エクスポート拡張**: 相談/メモ/TODOを出力に追加

### UX / 表示

- **コスト表示のチップ化**: クリックで詳細ポップオーバーを表示
- **スタイル切替**: Brutalism / Paper
- **レイアウト安定化**: 100vh固定とモバイルフォールバックを追加

### セキュリティ

- **APIキーをセッション限定に変更**: デフォルトでsessionStorageに保存（設定で永続化可）
- **ログのAPIキー秘匿化**: エラーログ出力時にAPIキーパターンを自動マスク
- **致命的エラー復旧UI**: セッションリセット/再読み込みを提示

### 信頼性 / 安定性

- **文字起こし描画最適化**: マーカーインデックス検索のループ回避
- **マイクストリーム重複防止**: 既存ストリームの適切なクリーンアップ
- **イベント二重バインド防止**: 重複リスナー登録を回避
- **SecureStorage堅牢化**: JSONパースエラー時のフォールバック処理

### コンプライアンス / ビルド

- **THIRD_PARTY_NOTICES更新**: 上流ライセンス・配布元の明記
- **CIスモークチェック追加**: 最小限のCIワークフローと権限設定

### 動作変更に関する注意

- **デフォルト動作変更**: APIキーはセッション終了時に削除されます。永続化したい場合は設定で「APIキーを次回も保持する」をONにしてください。
- **UI変更**: AI回答の「意見」「アイデア」は「相談」に統合されました。

---

## v1.2.1 (2026-01-10) - 会議コンテキスト強化

### 機能追加

- **会議コンテキストのファイル添付** (#26, #14): TXT/MD資料をAIに共有
  - ドラッグ&ドロップ/ファイル選択に対応
  - 最大5ファイル、2MB/件、1ファイル2000文字、合計8000文字まで
  - 「Enhanced Context」ONで添付資料もAIプロンプトに反映

### 改善

- **コンテキスト自動注入** (#24): 目的/参考資料を全AIリクエストに付加
  - 参照資料は引用として扱う注意文を追加（プロンプト注入対策）
- **エクスポートファイル名改善** (#24): `[会議タイトル]-YYYY-MM-DD.md` 形式に変更（未入力時は`meeting`）

### 修正

- **CSP対応**: ファイル削除のinline `onclick` を廃止しイベント委譲へ変更

## v1.2.0 (2025-01-09) - 履歴復元＆MDインポート機能

### 機能追加

- **履歴からの復元機能** (#22): 保存済み履歴から文字起こし・AI回答を再読み込み
  - 🔄ボタンで過去の会議データを現在のセッションに復元
  - 文字起こしチャンク、AI回答（要約/意見/アイデア/Q&A/議事録）を完全復元
  - 復元後に編集・追加質問が可能
  - 上書き保存対応（updatedAt追跡、元のcreatedAt維持）
- **MDファイルインポート** (#23): エクスポートしたMDファイルからデータを読み込み
  - 📂ボタンでMDファイルを選択してインポート
  - スマホからPC、PCから別のPCへの会議データ受け渡しを実現
  - タイトル、文字起こし、AI回答を自動パース

### 改善

- **モバイルモーダルスクロール修正**: 履歴モーダルでのスクロール操作を改善
  - 背景スクロール防止（body.modal-open）
  - iOSスムーススクロール対応（-webkit-overflow-scrolling: touch）
  - スクロール漏れ防止（overscroll-behavior: contain）

### 技術的変更

- i18nキー追加: `history.restore`, `history.import*`
- structuredClone使用（JSON fallback付き）によるディープコピー
- XSS安全: 全ユーザーデータをtextContentで表示

---

## v1.1.0 (2025-01-07) - 録音継続＆履歴機能

### 機能追加

- **LLMクイック設定モーダル** (#17, #12): 録音中でもLLM設定を変更可能に
  - ⚡ボタンでモーダルを開き、プロバイダー/APIキー/モデルを即座に変更
  - 設定変更は次回のAI呼び出しから即座に反映
  - 録音・文字起こしを中断せずにLLM切り替えが可能
- **会議履歴機能** (#15, #13): 過去の会議記録をIndexedDBに自動保存
  - 最大5件まで自動保存、古い履歴から自動削除
  - 📁ボタンで履歴一覧を表示、過去の会議を簡単に参照
  - 会議タイトル入力欄を追加（履歴検索用）
- **会議コンテキスト入力** (#16, #14): 会議の目的・背景情報を事前設定可能に
  - 📝ボタンで会議情報モーダルを開く
  - 「会議の目的・ゴール」「参考資料・背景情報」を入力
  - AIがより適切な回答を生成するためのコンテキストとして使用

### 改善

- **設定画面へのアクセス方法変更**: ポップアップウィンドウで開くように変更
  - 録音中に⚙️ボタンを押しても録音が中断しなくなった
  - メインウィンドウとは別ウィンドウで設定を編集
  - localStorage共有により設定変更は即座に反映

### 技術的変更

- i18nキー追加: `llmModal.*`, `history.*`, `context.*`
- IndexedDB導入: 会議履歴の永続化ストレージ

---

## v1.0.1 (2024-12-29) - UX改善

### 機能追加

- **ダークモード**: 表示テーマ（ライト/ダーク）を設定画面から選択可能に
  - 既存の6種類のアクセントカラーと組み合わせ可能
- **カスタムモデル入力**: 各LLMプロバイダーで任意のモデル名を指定可能に
  - プリセット選択に加えて、カスタム入力欄を追加
  - 新モデルをすぐに試せる（ただし未検証のため自己責任）
  - カスタムモデル > プリセット > デフォルトの優先順位で適用

### 改善

- **Deepgram UI整合**: WebSocket方式（Deepgram）選択時に送信間隔設定を無効化
  - リアルタイムストリーミングでは送信間隔設定が意味を持たないため
  - ユーザーの混乱を防止

---

## v1.0.0 (2024-12-29) - 初回公開

### 機能

- **リアルタイム文字起こし**: 会議音声を自動でテキスト化
  - OpenAI Whisper（チャンク送信、疑似リアルタイム）
  - Deepgram（WebSocket、真のリアルタイム）
- **AI回答**: 会議内容について質問・要約・意見・アイデアを取得
  - Google Gemini / Anthropic Claude / OpenAI / Groq に対応
- **コスト表示**: 文字起こし・AI回答それぞれの推定コストをリアルタイム表示
- **Markdownエクスポート**: 会議内容とAI回答をファイルに保存
- **PWA対応**: ホーム画面に追加してアプリのように使用可能
- **カラーテーマ**: 6種類のアクセントカラーから選択可能

### セキュリティ

- APIキーの暗号化保存（ブラウザローカルのみ）
- 自動削除オプション（共有PC向け）
- 設定のエクスポート/インポート（パスワード付き暗号化）
- XSS対策済み

### 料金体系

- **BYOK（Bring Your Own Key）方式**: ユーザー自身がAPIキーを用意
- **従量課金**: 各AIサービスの利用量に応じて課金（このアプリからの請求はなし）

### 対応ブラウザ

- Chrome / Edge（推奨）
- Safari（iOS推奨）
- Firefox（一部機能制限あり）
