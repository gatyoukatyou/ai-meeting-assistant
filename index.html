<!DOCTYPE html>
<html lang="ja" data-i18n-title="app.pageTitle" data-style="brutalism">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; base-uri 'self'; object-src 'none'; form-action 'self'; script-src 'self'; connect-src 'self' https://generativelanguage.googleapis.com https://api.openai.com https://api.groq.com https://api.anthropic.com wss://api.deepgram.com https://api.deepgram.com; img-src 'self' data:; style-src 'self' 'unsafe-inline'; font-src 'self' data:; manifest-src 'self';">

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#4f46e5">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="AIä¼šè­°">

  <title>AIå‚åŠ ä¼šè­°</title>
  <style>
    :root{
      /* Common tokens */
      --danger:#EF4444;
      --warning:#F59E0B;
      --success:#10B981;

      --font-sans:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,"Noto Sans JP",sans-serif;
      --font-serif:"Noto Serif JP","Hiragino Mincho ProN","Yu Mincho","Times New Roman",serif;
      --font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Courier New",monospace;
      --font-body:var(--font-sans);

      --pattern-size:22px;

      --focus-ring:0 0 0 3px rgba(79,70,229,.35);
    }

    html[data-style="brutalism"]{
      --bg:#E0E7FF;
      --card-bg:#FFFFFF;
      --text:#0B0B0B;
      --text-secondary:#475569;

      --primary:#4F46E5;
      --primary-hover:#4338CA;
      --accent:#F472B6;

      --border-color:#000;
      --border-width:2px;
      --border:var(--border-color);
      --shadow-hard:4px 4px 0 0 #000;
      --shadow-hard-sm:2px 2px 0 0 #000;
      --shadow-modal:8px 8px 0 0 #000;
      --radius:10px;

      --pattern-dot:rgba(71,85,105,.25);
      --pattern-image:radial-gradient(var(--pattern-dot) 1px, transparent 1px);

      --surface-muted:color-mix(in srgb, var(--bg) 70%, #fff 30%);
      --ai-response-bg:color-mix(in srgb, var(--card-bg) 70%, #F1F5F9 30%);
      --cost-bg:color-mix(in srgb, var(--warning) 70%, #fff 30%);
      --cost-text:#000;
      --accent-blue:#E0E7FF;
      --accent-green:#DCFCE7;
      --accent-border-blue:#C7D2FE;
      --accent-border-green:#A7F3D0;

      --tab-strip-bg:var(--bg);
      --tab-active-bg:var(--card-bg);

      --btn-hover-bg:var(--card-bg);
      --btn-hover-translate:-2px;
      --btn-hover-shadow:4px 4px 0 0 var(--border-color);

      --overlay-bg:rgba(0,0,0,0.5);
      --toast-bg:var(--card-bg);
      --meeting-mode-bg:linear-gradient(135deg, #0f172a 0%, #111827 100%);
      --modal-header-bg:var(--primary);
      --modal-close-color:#fff;

      --font-body:var(--font-sans);
      --textarea-font:var(--font-mono);
    }

    html[data-style="paper"]{
      --bg:#F6F0E7;
      --card-bg:#FFFCF7;
      --text:#2B2A26;
      --text-secondary:#6B645C;

      --primary:#2F4FA5;
      --primary-hover:#264181;
      --accent:#D97706;

      --border-color:#CFC6BA;
      --border-width:1px;
      --border:var(--border-color);
      --shadow-hard:none;
      --shadow-hard-sm:none;
      --shadow-modal:0 8px 20px rgba(0,0,0,0.12);
      --radius:10px;

      --pattern-dot:transparent;
      --pattern-image:none;

      --surface-muted:#F1EADD;
      --ai-response-bg:#F7F1E9;
      --cost-bg:#F6E7CC;
      --cost-text:#2B2A26;
      --accent-blue:#E8EEF9;
      --accent-green:#E6F3EA;
      --accent-border-blue:#C9D4EB;
      --accent-border-green:#C7DDCF;

      --tab-strip-bg:transparent;
      --tab-active-bg:var(--card-bg);

      --btn-hover-bg:#F1EADD;
      --btn-hover-translate:0px;
      --btn-hover-shadow:none;

      --overlay-bg:rgba(24,20,16,0.45);
      --toast-bg:var(--card-bg);
      --meeting-mode-bg:linear-gradient(135deg, #2a2218 0%, #16120d 100%);
      --modal-header-bg:var(--primary);
      --modal-close-color:#fff;

      --font-body:var(--font-serif);
      --textarea-font:var(--font-body);
    }

    html[data-style="brutalism"][data-display-theme="dark"]{
      --bg:#0F172A;
      --card-bg:#111C2F;
      --text:#F8FAFC;
      --text-secondary:#94A3B8;
      --border-color:#F8FAFC;
      --accent-blue:#1E3A5F;
      --accent-green:#14532D;
      --accent-border-blue:#1E40AF;
      --accent-border-green:#166534;
      --pattern-dot:rgba(148,163,184,.18);
      --surface-muted:color-mix(in srgb, var(--bg) 70%, #111827 30%);
      --ai-response-bg:color-mix(in srgb, var(--card-bg) 70%, #0f172a 30%);
      --cost-bg:color-mix(in srgb, var(--warning) 70%, #0f172a 30%);
      --cost-text:#0B0B0B;
      --overlay-bg:rgba(0,0,0,0.6);
      --meeting-mode-bg:linear-gradient(135deg, #0b1020 0%, #0a0f1a 100%);
      --focus-ring:0 0 0 3px rgba(129,140,248,.45);
    }

    html[data-style="paper"][data-display-theme="dark"]{
      --bg:#1F1B16;
      --card-bg:#26211B;
      --text:#F5F1E8;
      --text-secondary:#C9C1B5;
      --border-color:#5C5348;
      --accent-blue:#2A3550;
      --accent-green:#2C3A2E;
      --accent-border-blue:#3A4564;
      --accent-border-green:#3C4A3D;
      --surface-muted:#2D261E;
      --ai-response-bg:#2D261E;
      --cost-bg:#3A2F21;
      --cost-text:#F5F1E8;
      --overlay-bg:rgba(0,0,0,0.6);
      --meeting-mode-bg:linear-gradient(135deg, #1b1611 0%, #110d09 100%);
      --btn-hover-bg:#2E261F;
      --focus-ring:0 0 0 3px rgba(226,232,240,.35);
    }

    *{margin:0;padding:0;box-sizing:border-box;}
    html{color-scheme:light dark;}
    body{
      font-family:var(--font-body);
      background-color:var(--bg);
      color:var(--text);
      line-height:1.6;
      min-height:100vh;
      padding-bottom:2rem;
      /* Dot patternï¼ˆé‡ã„å ´åˆã¯å¾Œã§æ¶ˆã—ã¦OKï¼‰ */
      background-image:var(--pattern-image);
      background-size:var(--pattern-size) var(--pattern-size);
    }

    /* fixedèƒŒæ™¯ã¯ãƒ¢ãƒã‚¤ãƒ«ã§é‡ã„ã“ã¨ãŒã‚ã‚‹ã®ã§PCã ã‘ */
    @media (min-width: 768px){
      body{ background-attachment:fixed; }
    }

    /* ===== Header ===== */
    .header{
      background:var(--card-bg);
      border-bottom:var(--border-width) solid var(--border-color);
      padding:.6rem 1rem;
      position:sticky;
      top:0;
      z-index:100;
      box-shadow:var(--shadow-hard);
      margin-bottom:1.25rem;
    }
    .header-row-1{
      display:flex;
      justify-content:space-between;
      align-items:center;
      border-bottom:var(--border-width) dashed var(--border-color);
      padding-bottom:.5rem;
      margin-bottom:.5rem;
      gap:.75rem;
    }
    .header-brand{
      display:flex;
      align-items:center;
      gap:.6rem;
    }
    .header-icon{
      max-height:48px;
      width:auto;
    }
    .header-brand h1{
      font-size:1.1rem;
      line-height:1;
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:-.04em;
      background:var(--primary);
      color:#fff;
      padding:.25rem .6rem;
      transform:rotate(-1.5deg);
      border:var(--border-width) solid var(--border-color);
      box-shadow:var(--shadow-hard-sm);
    }
    .header-preferences{
      display:flex;
      align-items:center;
      gap:.5rem;
      flex-wrap:wrap;
    }
    .header-row-2{
      display:flex;
      align-items:center;
      gap:.75rem 1rem;
      flex-wrap:wrap;
    }

    /* ===== Bento grid ===== */
    .main-container{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:1.25rem;
      padding:0 1.5rem;
      max-width:1600px;
      margin:0 auto;
    }
    @media (max-width:1024px){
      .main-container{ grid-template-columns:1fr; }
    }

    /* ===== Panels ===== */
    .panel{
      background:var(--card-bg);
      border:var(--border-width) solid var(--border-color);
      border-radius:var(--radius);
      box-shadow:var(--shadow-hard);
      overflow:hidden;
      display:flex;
      flex-direction:column;

      /* â€œé«˜ã•å›ºå®šâ€ã¯ç ´ç¶»ã—ã‚„ã™ã„ã®ã§ã€ã¾ãšã¯ min-height + ä½™è£• */
      min-height:520px;
    }
    .panel-header{
      background:var(--surface-muted);
      border-bottom:var(--border-width) solid var(--border-color);
      padding:.75rem 1rem;
      font-weight:900;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:.75rem;
    }
    .panel-title{
      font-size:1.05rem;
      text-transform:uppercase;
    }
    .panel-body{
      padding:1rem;
      overflow:auto;
      flex:1;
    }

    /* ===== Buttons ===== */
    .btn{
      border:var(--border-width) solid var(--border-color);
      border-radius:var(--radius);
      padding:.55rem .95rem;
      font-weight:800;
      cursor:pointer;
      box-shadow:var(--shadow-hard-sm);
      transition:transform .12s ease, box-shadow .12s ease, background .12s ease;
      background:var(--card-bg);
      color:var(--text);
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      user-select:none;
    }
    .btn:hover{
      transform:translate(var(--btn-hover-translate), var(--btn-hover-translate));
      box-shadow:var(--btn-hover-shadow);
      background:var(--btn-hover-bg);
    }
    .btn:active{
      transform:translate(0,0);
      box-shadow:none;
    }
    .btn-primary{ background:var(--primary); color:#fff; }
    .btn-primary:hover{ background:var(--primary-hover); }
    .btn-danger{ background:var(--danger); color:#fff; }

    /* ===== Inputs ===== */
    input, select, textarea{
      border:var(--border-width) solid var(--border-color);
      border-radius:var(--radius);
      padding:.55rem .65rem;
      background:var(--card-bg);
      color:var(--text);
      font-family:inherit;
      box-shadow:inset 2px 2px 0 rgba(0,0,0,.08);
    }
    textarea{ font-family:var(--textarea-font); }
    input:focus, select:focus, textarea:focus{ outline:none; box-shadow: var(--focus-ring); }

    /* :focus-visible ã‚’å„ªå…ˆï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã®è¦‹ãˆæ–¹ãŒè‰¯ããªã‚‹ï¼‰ */
    :focus-visible{ outline:none; box-shadow: var(--focus-ring); }

    /* ===== Transcript / Code-ish areas ===== */
    .transcript-text, pre, code{
      font-family:var(--font-mono);
      font-size:.95rem;
      line-height:1.8;
    }

    /* ===== AI response blocks ===== */
    .ai-response{
      background:var(--ai-response-bg);
      border:var(--border-width) solid var(--border-color);
      border-radius:var(--radius);
      padding:1rem;
      margin-bottom:1rem;
      position:relative;
      box-shadow:var(--shadow-hard-sm);
    }

    /* ===== Tabs ===== */
    .tabs{
      display:flex;
      border-bottom:var(--border-width) solid var(--border-color);
      background:var(--tab-strip-bg);
      gap:0;
    }
    .tab{
      padding:.7rem 1rem;
      border:none;
      border-right:var(--border-width) solid var(--border-color);
      background:transparent;
      font-weight:900;
      cursor:pointer;
      color:var(--text-secondary);
    }
    .tab:last-child{ border-right:none; }
    .tab.active{
      background:var(--tab-active-bg);
      color:var(--text);
      margin-bottom:calc(-1 * var(--border-width));
      box-shadow:inset 0 -2px 0 0 var(--tab-active-bg);
    }

    /* ===== Cost display ===== */
    .cost-display{
      background:var(--cost-bg);
      border-top:var(--border-width) solid var(--border-color);
      color:var(--cost-text);
      padding:.75rem;
    }
    .cost-badge{
      border:var(--border-width) solid var(--border-color);
      background:#fff;
      color:#000;
      font-weight:900;
      border-radius:999px;
      padding:.12rem .55rem;
    }

    /* ===== Modals ===== */
    .modal{
      border:var(--border-width) solid var(--border-color);
      box-shadow:var(--shadow-modal);
      border-radius:var(--radius);
      background:var(--card-bg);
    }
    .modal-header{
      background:var(--modal-header-bg);
      color:#fff;
      border-bottom:var(--border-width) solid var(--border-color);
    }
    .modal-close{ color:var(--modal-close-color); }

    /* ===== Scrollbars (WebKit) ===== */
    ::-webkit-scrollbar{ width:12px; height:12px; }
    ::-webkit-scrollbar-track{
      background:var(--bg);
      border-left:var(--border-width) solid var(--border-color);
    }
    ::-webkit-scrollbar-thumb{
      background:var(--primary);
      border:var(--border-width) solid var(--border-color);
    }
    ::-webkit-scrollbar-thumb:hover{ background:var(--primary-hover); }

    /* ===== Responsive ===== */
    @media (max-width: 767px){
      .header-row-1{ flex-direction:column; align-items:flex-start; }
      .header-row-2{ flex-direction:column; align-items:stretch; }
      .btn{ width:100%; justify-content:center; }
      .panel{ min-height:420px; }
    }

    /* ===== Reduced motion ===== */
    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; }
    }

    /* ===== Tabs: content panes ===== */
    .tab-content{
      display:none;
      padding:1rem;
      max-height:300px;
      overflow:auto;
    }
    .tab-content.active{ display:block; }

    /* ===== Modal overlays ===== */
    .modal-overlay{
      display:none;
      position:fixed;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:var(--overlay-bg);
      z-index:1000;
      justify-content:center;
      align-items:center;
      padding:1rem;
    }
    .modal-overlay.active{ display:flex; }
    .modal-body{
      padding:1.5rem;
      overflow-y:auto;
      max-height:calc(90vh - 140px);
      -webkit-overflow-scrolling:touch;
      overscroll-behavior:contain;
    }
    .modal-footer{
      padding:1rem 1.5rem;
      border-top:var(--border-width) solid var(--border-color);
      display:flex;
      justify-content:flex-end;
      gap:.75rem;
    }
    .modal-close{
      background:none;
      border:none;
      font-size:1.5rem;
      cursor:pointer;
      line-height:1;
    }
    body.modal-open{
      overflow:hidden;
      position:fixed;
      width:100%;
      height:100%;
    }

    /* ===== Mobile main tabs ===== */
    .main-tabs{ display:none; }
    @media (max-width:1024px){
      .main-tabs{
        display:flex;
        background:var(--card-bg);
        border-bottom:var(--border-width) solid var(--border-color);
        position:sticky;
        top:0;
        z-index:90;
      }
      .main-tab{
        flex:1;
        padding:1rem;
        border:none;
        background:transparent;
        font-weight:900;
        color:var(--text-secondary);
        cursor:pointer;
        border-bottom:var(--border-width) solid transparent;
      }
      .main-tab.active{
        color:var(--text);
        background:var(--tab-active-bg);
        border-bottom-color:var(--border-color);
      }
      .main-container{
        padding:0;
        gap:0;
      }
      .main-container .panel{
        display:none;
        border-radius:0;
        border-left:none;
        border-right:none;
        box-shadow:none;
      }
      .main-container .panel.active{ display:flex; }
    }

    /* ===== Floating stop button ===== */
    .floating-stop-btn{
      display:none;
      position:fixed;
      bottom:2rem;
      left:50%;
      transform:translateX(-50%);
      z-index:1500;
      padding:1rem 3rem;
      font-size:1.25rem;
      font-weight:900;
      border-radius:999px;
      box-shadow:var(--shadow-hard);
    }
    .floating-stop-btn.visible{
      display:flex;
      align-items:center;
      gap:.75rem;
    }
    @media (min-width: 768px){
      .floating-stop-btn{ display:none !important; }
    }
    @media (max-width: 767px){
      .floating-stop-btn{
        bottom:1.5rem;
        padding:1.25rem 2.5rem;
        font-size:1.125rem;
        min-height:60px;
      }
    }

    /* ===== Meeting mode ===== */
    .meeting-mode-overlay{
      display:none;
      position:fixed;
      top:0;
      left:0;
      right:0;
      bottom:0;
      background:var(--meeting-mode-bg);
      z-index:2000;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      padding:2rem;
    }
    .meeting-mode-overlay.active{ display:flex; }
    .meeting-mode-status{
      text-align:center;
      color:#fff;
      margin-bottom:3rem;
    }
    .meeting-mode-icon{
      font-size:4rem;
      margin-bottom:1rem;
    }
    .meeting-mode-text{
      font-size:1.5rem;
      font-weight:900;
      margin-bottom:.5rem;
    }
    .meeting-mode-time{
      font-size:3rem;
      font-weight:300;
      font-family:var(--font-mono);
      letter-spacing:.1em;
    }
    .meeting-mode-hint{
      font-size:.875rem;
      color:rgba(255,255,255,.65);
      margin-top:1rem;
    }
    .meeting-mode-stop-btn{
      padding:1.5rem 4rem;
      font-size:1.25rem;
      font-weight:900;
      border-radius:999px;
      margin-bottom:1.5rem;
    }
    .meeting-mode-exit-btn{
      padding:.75rem 2rem;
      font-size:.875rem;
      background:rgba(255,255,255,.1);
      color:rgba(255,255,255,.85);
      border:var(--border-width) solid rgba(255,255,255,.2);
      border-radius:999px;
      cursor:pointer;
    }
    .meeting-mode-exit-btn:hover{ background:rgba(255,255,255,.2); }
    .meeting-mode-toggle{ display:none; }
    @media (max-width: 767px){
      .meeting-mode-toggle.visible{
        display:inline-flex;
        position:fixed;
        bottom:6rem;
        left:50%;
        transform:translateX(-50%);
        z-index:1400;
        padding:.625rem 1.25rem;
        font-size:.8rem;
        background:rgba(255,255,255,.9);
        color:var(--text);
        border:var(--border-width) solid var(--border-color);
        border-radius:999px;
        box-shadow:var(--shadow-hard-sm);
      }
    }

    /* ===== Toasts ===== */
    .toast-container{
      position:fixed;
      top:1rem;
      right:1rem;
      z-index:2000;
      display:flex;
      flex-direction:column;
      gap:.5rem;
      pointer-events:none;
    }
    .toast{
      pointer-events:auto;
      background:var(--toast-bg);
      border:var(--border-width) solid var(--border-color);
      border-left:6px solid var(--primary);
      border-radius:var(--radius);
      padding:.85rem 1rem;
      box-shadow:var(--shadow-hard-sm);
      display:flex;
      align-items:center;
      gap:.75rem;
    }
    .toast.error{ border-left-color:var(--danger); }
    .toast.success{ border-left-color:var(--success); }
    .toast.warning{ border-left-color:var(--warning); }
    .toast-message{ font-size:.9rem; line-height:1.4; }
  </style>
</head>
<body>
  <header class="header">
    <!-- Row 1: ãƒ–ãƒ©ãƒ³ãƒ‰ + è¨­å®š -->
    <div class="header-row-1">
      <div class="header-brand">
        <img src="icon-192.png" alt="" class="header-icon">
        <h1 data-i18n="app.title">AIå‚åŠ ä¼šè­°</h1>
      </div>
      <div class="header-preferences">
        <button type="button" class="theme-toggle" id="themeToggleBtn" title="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã«åˆ‡æ›¿">ğŸŒ™</button>
        <select id="languageSwitcher" class="model-select lang-select">
          <option value="ja">ğŸ‡¯ğŸ‡µ Japanese</option>
          <option value="en">ğŸ‡ºğŸ‡¸ English</option>
        </select>
        <select id="styleSwitcher" class="model-select" style="font-size:0.85rem; min-width:120px;">
          <option value="brutalism">ğŸ“¦ Brutalism</option>
          <option value="paper">ğŸ“„ Paper</option>
        </select>
        <button type="button" class="quick-settings-btn" id="openLLMSettingsBtn" data-i18n-title="llmModal.title" title="LLMè¨­å®š">âš¡</button>
        <button type="button" class="settings-link" id="openFullSettingsBtn" data-i18n-title="header.fullSettings" title="å…¨è¨­å®š">âš™ï¸</button>
      </div>
    </div>

    <!-- Row 2: æ“ä½œãƒ„ãƒ¼ãƒ«ãƒãƒ¼ -->
    <div class="header-row-2">
      <div class="header-record">
        <button type="button" class="btn btn-primary record-btn" id="recordBtn">
          <span data-i18n="app.recording.start">ğŸ¤ éŒ²éŸ³é–‹å§‹</span>
        </button>
        <button type="button" class="btn btn-secondary record-btn" id="pauseBtn" style="display: none;">
          <span data-i18n="app.recording.pause">Pause</span>
        </button>
        <span class="status-badge status-ready" id="statusBadge">
          <span data-i18n="app.recording.statusReady">å¾…æ©Ÿä¸­</span>
        </span>
        <button type="button" class="btn btn-ghost context-btn" id="openContextModalBtn">
          ğŸ“ <span data-i18n="context.trigger">ä¼šè­°æƒ…å ±ã‚’å…¥åŠ›</span>
        </button>
        <div class="context-status" id="contextStatusBadge" style="display:none;" data-i18n="context.saved">ä¼šè­°æƒ…å ±ã‚’ä½¿ç”¨ä¸­</div>
        <!-- Enhancement ãƒãƒƒã‚¸ï¼ˆv3: Issue #14ï¼‰ -->
        <div class="enhancement-badge" id="reasoningBoostBadge" style="display:none; background: var(--accent); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem; margin-left: 0.5rem;">Boost ON</div>
        <div class="enhancement-badge" id="nativeDocsBadge" style="display:none; background: #10b981; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem; margin-left: 0.5rem;">Native Docs ON</div>
      </div>
      <div class="header-stt-controls">
        <select id="transcriptProvider" class="model-select" title="STTãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼">
          <option value="openai_stt" selected>ğŸ¤ Whisper</option>
          <option value="deepgram_realtime">âš¡ Deepgram</option>
        </select>
        <select id="sttLanguage" class="model-select" title="éŸ³å£°è¨€èª">
          <option value="ja" selected>ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</option>
          <option value="en">ğŸ‡ºğŸ‡¸ English</option>
          <option value="auto">ğŸŒ Auto</option>
        </select>
        <select id="transcriptInterval" class="model-select" title="é€ä¿¡é–“éš”">
          <option value="5">5ç§’</option>
          <option value="10">10ç§’</option>
          <option value="15" selected>15ç§’</option>
          <option value="30">30ç§’</option>
          <option value="60">60ç§’</option>
          <option value="120">2åˆ†</option>
        </select>
        <span class="interval-hint" id="intervalHint" style="display: none;">âš¡</span>
      </div>
      <div class="header-export">
        <button class="btn btn-secondary export-btn" id="openExportBtn" title="ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ">
          <span>ğŸ“¥</span>
          <span class="export-btn-text" data-i18n="common.export">Export</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Phase 3: ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒãƒ«åˆ‡ã‚Šæ›¿ãˆã‚¿ãƒ–ï¼ˆã‚¹ãƒãƒ›å°‚ç”¨ï¼‰ -->
  <div class="main-tabs">
    <button class="main-tab active" data-main-tab="transcript">ğŸ“ <span data-i18n="app.panel.transcript">æ–‡å­—èµ·ã“ã—</span></button>
    <button class="main-tab" data-main-tab="ai">ğŸ’¬ <span data-i18n="app.panel.aiResponse">AIå›ç­”</span></button>
  </div>

  <!-- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal-overlay" id="contextModal">
    <div class="modal" style="max-width:720px;">
      <div class="modal-header">
        <h2>ğŸ“ <span data-i18n="context.modalTitle">ä¼šè­°æƒ…å ±ã‚’è¨­å®š</span></h2>
        <button class="modal-close" id="closeContextModalBtn">Ã—</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom:0.75rem; color:var(--text-secondary);" data-i18n="context.modalDescription">
          è­°é¡Œã‚„èƒŒæ™¯ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€AIãŒæ–‡è„ˆã‚’ç†è§£ã—ãŸå›ç­”ã‚’ç”Ÿæˆã§ãã¾ã™ã€‚
        </p>
        <div class="setting-group">
          <label class="setting-label" for="contextGoalInput" data-i18n="context.goalLabel">è­°é¡Œãƒ»ã‚´ãƒ¼ãƒ«</label>
          <textarea id="contextGoalInput" rows="3" class="input" data-i18n-placeholder="context.goalPlaceholder" placeholder="ä¾‹: æ–°å•†å“ã®ãƒãƒ¼ãƒŸãƒ³ã‚°æ±ºå®šã€æƒ³å®šé¡§å®¢åƒã®æ•´ç†"></textarea>
        </div>
        <div class="setting-group">
          <label class="setting-label" for="contextParticipantsInput" data-i18n="context.participantsLabel">å‚åŠ è€…ãƒ»å½¹å‰²</label>
          <textarea id="contextParticipantsInput" rows="2" class="input" data-i18n-placeholder="context.participantsPlaceholder" placeholder="ä¾‹: ç”°ä¸­ï¼ˆPMï¼‰ã€ä½è—¤ï¼ˆãƒ‡ã‚¶ã‚¤ãƒ³ï¼‰ã€éˆ´æœ¨ï¼ˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼‰"></textarea>
        </div>
        <div class="setting-group">
          <label class="setting-label" for="contextHandoffInput" data-i18n="context.handoffLabel">å¼•ãç¶™ããƒ»å‰æ</label>
          <textarea id="contextHandoffInput" rows="2" class="input" data-i18n-placeholder="context.handoffPlaceholder" placeholder="ä¾‹: å‰å›ã®æ±ºå®šäº‹é …ã€æœªè§£æ±ºã®èª²é¡Œã€å‰ææ¡ä»¶"></textarea>
        </div>
        <div class="setting-group">
          <label class="setting-label" for="contextReferenceInput" data-i18n="context.referenceLabel">å‚è€ƒãƒ†ã‚­ã‚¹ãƒˆãƒ»è³‡æ–™</label>
          <textarea id="contextReferenceInput" rows="4" class="input" data-i18n-placeholder="context.referencePlaceholder" placeholder="å¿…è¦ã«å¿œã˜ã¦ä¼ç”»æ›¸ã‚„å°‚é–€ç”¨èªãƒªã‚¹ãƒˆã‚’è²¼ã‚Šä»˜ã‘"></textarea>
        </div>

        <!-- ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå¼·åŒ–ONæ™‚ã®ã¿è¡¨ç¤ºï¼‰ -->
        <div class="setting-group" id="contextFileUploadSection" style="display:none;">
          <label class="setting-label" data-i18n="context.filesLabel">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«</label>

          <!-- ãƒ‰ãƒ­ãƒƒãƒ—ã‚¾ãƒ¼ãƒ³ -->
          <div class="file-drop-zone" id="contextDropZone">
            <div class="file-drop-content">
              <span class="file-drop-icon">ğŸ“</span>
              <span class="file-drop-text" data-i18n="context.dropZoneText">ã“ã“ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã€ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</span>
              <span class="file-drop-hint" data-i18n="context.dropZoneHint">å¯¾å¿œå½¢å¼: TXT, MD, PDF, DOCX, CSVï¼ˆå„2MBã¾ã§ï¼‰</span>
            </div>
          </div>

          <!-- éš ã—ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ› -->
          <input type="file" id="contextFileInput" accept=".txt,.md,.pdf,.docx,.csv,text/plain,text/markdown,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/csv" multiple style="display:none;">

          <!-- ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ï¼ˆãƒ¢ãƒã‚¤ãƒ«ç”¨ï¼‰ -->
          <button type="button" class="btn btn-secondary" id="contextSelectFilesBtn" style="width:100%; margin-top:0.5rem;">
            ğŸ“ <span data-i18n="context.selectFiles">ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</span>
          </button>

          <!-- ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆ -->
          <div class="context-file-list" id="contextFileList"></div>

          <!-- æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ -->
          <div class="context-char-counter" id="contextCharCounter">
            <span class="char-count-text">0 / 8,000</span>
            <div class="char-count-bar">
              <div class="char-count-fill" style="width:0%"></div>
            </div>
          </div>
        </div>

        <!-- Enhancements ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆIssue #14 two-togglesï¼‰ -->
        <div class="setting-group" style="margin-top:1rem; padding-top:1rem; border-top:1px solid var(--border-color);">
          <label class="setting-label" data-i18n="context.enhancementsLabel">æ‹¡å¼µæ©Ÿèƒ½</label>

          <!-- Thinking Boost ãƒˆã‚°ãƒ« -->
          <div class="toggle-row" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.75rem;">
            <div style="flex:1;">
              <span data-i18n="context.reasoningBoostLabel">Thinkingå¼·åŒ–</span>
              <span class="toggle-hint" style="font-size:0.75rem; color:var(--text-secondary); display:block;" data-i18n="context.reasoningBoostHint">ç²¾åº¦å‘ä¸Šãƒ»æ™‚é–“/ã‚³ã‚¹ãƒˆå¢—ã®å¯èƒ½æ€§</span>
              <span class="toggle-disabled-reason" id="reasoningBoostDisabledReason" style="font-size:0.7rem; color:var(--warning); display:none;"></span>
            </div>
            <label class="switch">
              <input type="checkbox" id="reasoningBoostToggle">
              <span class="slider"></span>
            </label>
          </div>

          <!-- Native Docs ãƒˆã‚°ãƒ« -->
          <div class="toggle-row" style="display:flex; justify-content:space-between; align-items:center;">
            <div style="flex:1;">
              <span data-i18n="context.nativeDocsLabel">è³‡æ–™ãã®ã¾ã¾é€ä¿¡</span>
              <span class="toggle-hint" style="font-size:0.75rem; color:var(--text-secondary); display:block;" data-i18n="context.nativeDocsHint">PDFã‚’ãã®ã¾ã¾é€ä¿¡ãƒ»ç²¾åº¦å‘ä¸Š/ã‚³ã‚¹ãƒˆå¢—ã®å¯èƒ½æ€§</span>
              <span class="toggle-disabled-reason" id="nativeDocsDisabledReason" style="font-size:0.7rem; color:var(--warning); display:none;"></span>
            </div>
            <label class="switch">
              <input type="checkbox" id="nativeDocsToggle">
              <span class="slider"></span>
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer" style="justify-content:space-between;">
        <button type="button" class="btn btn-ghost" id="clearContextBtn">ğŸ§¹ <span data-i18n="context.clear">å…¥åŠ›å†…å®¹ã‚’å‰Šé™¤</span></button>
        <div style="display:flex; gap:0.5rem;">
          <button type="button" class="btn btn-secondary" id="cancelContextBtn" data-i18n="common.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
          <button type="button" class="btn btn-primary" id="saveContextBtn" data-i18n="context.save">è¨­å®šã—ã¦é–‰ã˜ã‚‹</button>
        </div>
      </div>
    </div>
  </div>

  <main class="main-container">
    <!-- æ–‡å­—èµ·ã“ã—ãƒ‘ãƒãƒ« -->
    <div class="panel active" id="transcriptPanel">
      <div class="panel-header">
        <span class="panel-title">ğŸ“ <span data-i18n="app.panel.transcript">æ–‡å­—èµ·ã“ã—</span></span>
        <div class="panel-actions" style="display:flex; gap:0.5rem;">
          <button class="btn btn-ghost" id="openHistoryBtn" style="font-size:0.75rem;">ğŸ—‚ï¸ <span data-i18n="history.open">å±¥æ­´</span></button>
          <button class="btn btn-ghost" id="clearTranscriptBtn" style="font-size: 0.75rem;" data-i18n="common.clear">ã‚¯ãƒªã‚¢</button>
        </div>
      </div>
      <div class="meeting-title-row" style="display:flex; gap:0.5rem; align-items:center; margin:0.5rem 0;">
        <label for="meetingTitleInput" class="meeting-title-label" style="font-size:0.9rem; color:var(--text-secondary);">
          <span data-i18n="history.titleLabel">ä¼šè­°ã‚¿ã‚¤ãƒˆãƒ«</span>
        </label>
        <input type="text" id="meetingTitleInput" class="input" style="flex:1;" data-i18n-placeholder="history.titlePlaceholder" placeholder="ä¾‹: å–¶æ¥­å®šä¾‹ (2026/01/06)">
      </div>
      <div class="panel-body" id="transcriptBody">
        <div class="transcript-text" id="transcriptText"><span class="transcript-placeholder" id="transcriptPlaceholder" data-i18n="app.transcript.placeholder">éŒ²éŸ³ã‚’é–‹å§‹ã™ã‚‹ã¨ã€ã“ã“ã«æ–‡å­—èµ·ã“ã—ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...</span></div>
      </div>
      <div class="cost-display" id="transcriptCostPanel">
        <div class="cost-header" data-cost-target="transcript">
          <span>ğŸ’° <span data-i18n="app.cost.transcriptCost">æ–‡å­—èµ·ã“ã—ã‚³ã‚¹ãƒˆ</span></span>
          <span><span id="transcriptCostTotal">Â¥0</span> <span id="transcriptCostBadge" class="cost-badge cost-badge-low" data-i18n="app.cost.low">ä½</span></span>
        </div>
        <div class="cost-details" id="transcriptCostDetails">
          <div class="cost-section">
            <div class="cost-section-title">ğŸ“Š <span data-i18n="app.cost.usage">ä½¿ç”¨é‡</span></div>
            <div class="cost-item">
              <span class="cost-item-label" data-i18n="app.cost.processingTime">å‡¦ç†æ™‚é–“:</span>
              <span id="transcriptDuration">0ç§’</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label" data-i18n="app.cost.apiCalls">APIå‘¼ã³å‡ºã—:</span>
              <span id="transcriptCalls">0å›</span>
            </div>
          </div>
          <div class="cost-section">
            <div class="cost-section-title">ğŸ’µ <span data-i18n="app.cost.byProvider">ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥</span></div>
            <div class="cost-item">
              <span class="cost-item-label">OpenAI Whisper:</span>
              <span id="openaiTranscriptCost">Â¥0</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label">Deepgram:</span>
              <span id="deepgramTranscriptCost">Â¥0</span>
            </div>
          </div>
          <div class="cost-section">
            <div class="cost-section-title">ğŸ“ˆ ãƒ¬ãƒ¼ãƒˆ</div>
            <div class="cost-item">
              <span class="cost-item-label">Whisper:</span>
              <span>Â¥0.9/åˆ†</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label">Deepgram:</span>
              <span>~Â¥0.36/åˆ†</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- AIãƒ‘ãƒãƒ« -->
    <div class="panel" id="aiPanel">
      <div class="panel-header">
        <span class="panel-title">ğŸ’¬ <span data-i18n="app.panel.aiResponse">AIå›ç­”</span></span>
        <span class="llm-indicator" id="llmIndicator" title="ä½¿ç”¨ä¸­ã®LLM">ğŸ¤– æœªè¨­å®š</span>
      </div>
      
      <div class="ai-section" style="padding: 1rem; padding-bottom: 0;">
        <div class="ai-buttons">
          <button class="btn btn-primary ask-ai-btn" data-ai-type="summary">ğŸ“‹ <span data-i18n="app.ai.summary">è¦ç´„</span></button>
          <button class="btn btn-secondary ask-ai-btn" data-ai-type="opinion">ğŸ’­ <span data-i18n="app.ai.opinion">æ„è¦‹ã‚’èã</span></button>
          <button class="btn btn-secondary ask-ai-btn" data-ai-type="idea">ğŸ’¡ <span data-i18n="app.ai.idea">ã‚¢ã‚¤ãƒ‡ã‚¢</span></button>
          <button class="btn btn-secondary ask-ai-btn" data-ai-type="minutes" id="minutesBtn" disabled data-i18n-title="toast.qa.minutesAfterStop">ğŸ“ <span data-i18n="app.ai.minutes">è­°äº‹éŒ²</span></button>
        </div>
        <div class="custom-question">
          <textarea id="customQuestion" data-i18n-placeholder="app.ai.customPlaceholder" placeholder="è‡ªç”±ã«è³ªå•...ï¼ˆæ–‡å­—èµ·ã“ã—ã‚’ã‚³ãƒ”ãƒšã—ã¦è©²å½“ç®‡æ‰€ã‚’èãã“ã¨ã‚‚å¯èƒ½ï¼‰" rows="2"></textarea>
          <button type="button" class="btn btn-primary" id="askCustomBtn" data-i18n="common.send">é€ä¿¡</button>
        </div>
      </div>

      <div class="tabs">
        <button class="tab active" data-tab="summary" data-i18n="app.ai.summary">è¦ç´„</button>
        <button class="tab" data-tab="opinion" data-i18n="app.ai.opinion">æ„è¦‹</button>
        <button class="tab" data-tab="idea" data-i18n="app.ai.idea">ã‚¢ã‚¤ãƒ‡ã‚¢</button>
        <button class="tab" data-tab="minutes" data-i18n="app.ai.minutes">è­°äº‹éŒ²</button>
        <button class="tab" data-tab="custom" data-i18n="app.ai.qa">Q&A</button>
      </div>

      <div class="tab-content active" id="tab-summary">
        <div class="ai-response" id="response-summary"></div>
      </div>
      <div class="tab-content" id="tab-opinion">
        <div class="ai-response" id="response-opinion"></div>
      </div>
      <div class="tab-content" id="tab-idea">
        <div class="ai-response" id="response-idea"></div>
      </div>
      <div class="tab-content" id="tab-minutes">
        <div class="ai-response" id="response-minutes">
          <p class="placeholder-text" data-i18n="app.aiResponse.minutesPlaceholder">éŒ²éŸ³åœæ­¢å¾Œã«ã€ŒğŸ“ è­°äº‹éŒ²ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€æ§‹é€ åŒ–ã•ã‚ŒãŸè­°äº‹éŒ²ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚</p>
        </div>
      </div>
      <div class="tab-content" id="tab-custom">
        <div id="qa-history"></div>
      </div>

      <div class="cost-display" id="llmCostPanel">
        <div class="cost-header" data-cost-target="llm">
          <span>ğŸ’° <span data-i18n="app.cost.llmCost">LLMã‚³ã‚¹ãƒˆ</span></span>
          <span><span id="llmCostTotal">Â¥0</span> <span id="llmCostBadge" class="cost-badge cost-badge-low" data-i18n="app.cost.low">ä½</span></span>
        </div>
        <div class="cost-details" id="llmCostDetails">
          <div class="cost-section">
            <div class="cost-section-title">ğŸ“Š <span data-i18n="app.cost.usage">ä½¿ç”¨é‡</span></div>
            <div class="cost-item">
              <span class="cost-item-label" data-i18n="export.document.costInputTokens">å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³:</span>
              <span id="llmInputTokens">0</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label" data-i18n="export.document.costOutputTokens">å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³:</span>
              <span id="llmOutputTokens">0</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label" data-i18n="app.cost.apiCalls">APIå‘¼ã³å‡ºã—:</span>
              <span id="llmCalls">0å›</span>
            </div>
          </div>
          <div class="cost-section">
            <div class="cost-section-title">ğŸ’µ <span data-i18n="app.cost.byProvider">ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¥</span></div>
            <div class="cost-item">
              <span class="cost-item-label">Gemini:</span>
              <span id="geminiLlmCost">Â¥0</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label">Claude:</span>
              <span id="claudeCost">Â¥0</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label">OpenAI:</span>
              <span id="openaiCost">Â¥0</span>
            </div>
            <div class="cost-item">
              <span class="cost-item-label">Groq:</span>
              <span id="groqCost">Â¥0</span>
            </div>
          </div>
        </div>
        <div class="cost-row cost-total" style="margin-top: 0.5rem;">
          <span>ğŸ“Š <span data-i18n="app.cost.total">åˆè¨ˆæ¦‚ç®—</span>:</span>
          <span id="totalCost">Â¥0</span>
        </div>
        <div id="costWarning" class="cost-warning" style="display: none;">
        </div>
      </div>
    </div>
  </main>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
  <footer style="text-align: center; padding: 1rem; font-size: 0.75rem; color: var(--text-secondary); border-top: 1px solid var(--border); background: var(--card-bg);">
    <div style="display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap;">
      <a href="docs/TERMS.md" target="_blank" style="color: var(--text-secondary); text-decoration: none;" data-i18n="footer.terms">åˆ©ç”¨è¦ç´„</a>
      <a href="docs/PRIVACY.md" target="_blank" style="color: var(--text-secondary); text-decoration: none;" data-i18n="footer.privacy">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
      <a href="docs/SECURITY.md" target="_blank" style="color: var(--text-secondary); text-decoration: none;" data-i18n="footer.security">ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</a>
      <a href="https://github.com/gatyoukatyou/ai-meeting-assistant" target="_blank" rel="noopener" style="color: var(--text-secondary); text-decoration: none;">GitHub</a>
    </div>
    <div style="margin-top: 0.5rem;" data-i18n="footer.copyright">
      Â© 2024 AIå‚åŠ ä¼šè­° | MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹
    </div>
  </footer>

  <!-- ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal-overlay" id="welcomeModal">
    <div class="modal">
      <div class="modal-header">
        <h2>ğŸ¤– <span data-i18n="modal.welcome.title">AIå‚åŠ ä¼šè­°ã¸ã‚ˆã†ã“ã</span></h2>
        <button class="modal-close" id="closeWelcomeModalBtn">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="welcome-content">
          <p class="welcome-desc" data-i18n="modal.welcome.description">ä¼šè­°ä¸­ã«AIãŒãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å‚åŠ ã—ã€æ–‡å­—èµ·ã“ã—ãƒ»è¦ç´„ãƒ»æ„è¦‹ãƒ»ã‚¢ã‚¤ãƒ‡ã‚¢ææ¡ˆã‚’è¡Œã„ã¾ã™</p>

          <div class="welcome-features">
            <div class="welcome-feature">
              <span class="welcome-feature-icon">ğŸ¤</span>
              <span class="welcome-feature-text" data-i18n="modal.welcome.feature1">é«˜ç²¾åº¦ãªéŸ³å£°æ–‡å­—èµ·ã“ã—ï¼ˆOpenAI Whisperï¼‰</span>
            </div>
            <div class="welcome-feature">
              <span class="welcome-feature-icon">ğŸ§ </span>
              <span class="welcome-feature-text" data-i18n="modal.welcome.feature2">è¤‡æ•°ã®AIãƒ¢ãƒ‡ãƒ«ã«å¯¾å¿œ</span>
            </div>
            <div class="welcome-feature">
              <span class="welcome-feature-icon">ğŸ”’</span>
              <span class="welcome-feature-text" data-i18n="modal.welcome.feature3">APIã‚­ãƒ¼ã¯é›£èª­åŒ–ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜</span>
            </div>
            <div class="welcome-feature">
              <span class="welcome-feature-icon">ğŸ’°</span>
              <span class="welcome-feature-text" data-i18n="modal.welcome.feature4">åˆ©ç”¨æ–™é‡‘ã®æ¦‚ç®—ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º</span>
            </div>
          </div>

          <div style="margin-top: 1rem; font-size: 0.75rem; color: var(--text-secondary); text-align: center;">
            åˆ©ç”¨é–‹å§‹ã«ã‚ˆã‚Šã€<a href="docs/TERMS.md" target="_blank" style="color: var(--primary);">åˆ©ç”¨è¦ç´„</a>ã¨<a href="docs/PRIVACY.md" target="_blank" style="color: var(--primary);">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã«åŒæ„ã—ãŸã‚‚ã®ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="skipWelcomeBtn" data-i18n="modal.welcome.skipButton">å¾Œã§è¨­å®šã™ã‚‹</button>
        <a href="config.html" class="btn btn-primary">âš™ï¸ <span data-i18n="modal.welcome.startButton">è¨­å®šã‚’é–‹å§‹ã™ã‚‹</span></a>
      </div>
    </div>
  </div>


  <!-- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal-overlay" id="exportModal">
    <div class="modal" style="max-width: 700px;">
      <div class="modal-header">
        <h2>ğŸ“¥ <span data-i18n="export.title">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span></h2>
        <button class="modal-close" id="closeExportModalBtn">Ã—</button>
      </div>
      <div class="modal-body">
        <!-- é …ç›®é¸æŠ -->
        <div class="setting-group">
          <label class="setting-label" data-i18n="export.selectItems">å‡ºåŠ›é …ç›®ã‚’é¸æŠ</label>
          <div class="export-options">
            <label class="export-option">
              <input type="checkbox" id="exportMinutes" checked>
              <span>ğŸ“ è­°äº‹éŒ²</span>
            </label>
            <label class="export-option">
              <input type="checkbox" id="exportSummary" checked>
              <span>ğŸ“‹ è¦ç´„</span>
            </label>
            <label class="export-option">
              <input type="checkbox" id="exportOpinion" checked>
              <span>ğŸ’­ æ„è¦‹</span>
            </label>
            <label class="export-option">
              <input type="checkbox" id="exportIdea" checked>
              <span>ğŸ’¡ ã‚¢ã‚¤ãƒ‡ã‚¢</span>
            </label>
            <label class="export-option">
              <input type="checkbox" id="exportQA" checked>
              <span>â“ Q&A</span>
            </label>
            <label class="export-option">
              <input type="checkbox" id="exportTranscript" checked>
              <span>ğŸ“œ æ–‡å­—èµ·ã“ã—</span>
            </label>
            <label class="export-option">
              <input type="checkbox" id="exportCost" checked>
              <span>ğŸ’° ã‚³ã‚¹ãƒˆè©³ç´°</span>
            </label>
          </div>
          <div class="export-presets">
            <button class="btn btn-ghost btn-sm" onclick="setExportPreset('all')" data-i18n="export.presets.all">å…¨é¸æŠ</button>
            <button class="btn btn-ghost btn-sm" onclick="setExportPreset('minutes')" data-i18n="export.presets.minutesOnly">è­°äº‹éŒ²ã®ã¿</button>
            <button class="btn btn-ghost btn-sm" onclick="setExportPreset('ai')" data-i18n="export.presets.aiOnly">AIå›ç­”ã®ã¿</button>
            <button class="btn btn-ghost btn-sm" onclick="setExportPreset('none')" data-i18n="export.presets.clear">ã‚¯ãƒªã‚¢</button>
          </div>
        </div>
        <!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
        <div class="setting-group">
          <label class="setting-label" data-i18n="export.preview">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</label>
          <div class="export-preview" id="exportPreview"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="closeExportModalFooterBtn" data-i18n="common.close">é–‰ã˜ã‚‹</button>
        <button class="btn btn-primary" id="downloadExportBtn">ğŸ“¥ <span data-i18n="common.download">ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</span></button>
      </div>
    </div>
  </div>

<!-- å±¥æ­´ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal-overlay" id="historyModal">
    <div class="modal" style="max-width:700px;">
      <div class="modal-header">
        <h2>ğŸ—‚ï¸ <span data-i18n="history.modalTitle">ä¼šè­°å±¥æ­´</span></h2>
        <button class="modal-close" id="closeHistoryModalBtn">Ã—</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom:0.75rem; font-size:0.9rem; color:var(--text-secondary);" data-i18n="history.modalDescription">æœ€å¤§5ä»¶ã¾ã§è‡ªå‹•ä¿å­˜ã•ã‚Œã€å¤ã„å±¥æ­´ã‹ã‚‰å‰Šé™¤ã•ã‚Œã¾ã™ã€‚</p>
        <div id="historyList" class="history-list" data-i18n-empty="history.empty" style="display:flex; flex-direction:column; gap:0.75rem;"></div>
      </div>
      <div class="modal-footer" style="justify-content:space-between;">
        <button class="btn btn-ghost" id="clearHistoryBtn">ğŸ§¹ <span data-i18n="history.clearAll">å±¥æ­´ã‚’å…¨ã¦å‰Šé™¤</span></button>
        <div style="display:flex; gap:0.5rem;">
          <button class="btn btn-secondary" id="importHistoryBtn">ğŸ“‚ <span data-i18n="history.import">MDãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€</span></button>
          <input type="file" id="importFileInput" accept=".md,text/markdown" style="display:none;">
          <button class="btn btn-secondary" id="closeHistoryModalFooterBtn" data-i18n="common.close">é–‰ã˜ã‚‹</button>
        </div>
      </div>
    </div>
  </div>

  <!-- LLMè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div class="modal-overlay" id="llmSettingsModal">
    <div class="modal" style="max-width: 450px;">
      <div class="modal-header">
        <h2>âš¡ <span data-i18n="llmModal.title">LLMè¨­å®š</span></h2>
        <button class="modal-close" id="closeLLMModalBtn">Ã—</button>
      </div>
      <div class="modal-body">
        <div class="setting-group">
          <label class="setting-label" data-i18n="llmModal.selectProvider">ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’é¸æŠ</label>
          <div class="llm-provider-tabs">
            <button type="button" class="llm-provider-tab active" data-provider="gemini">Gemini</button>
            <button type="button" class="llm-provider-tab" data-provider="claude">Claude</button>
            <button type="button" class="llm-provider-tab" data-provider="openai_llm">OpenAI</button>
            <button type="button" class="llm-provider-tab" data-provider="groq">Groq</button>
          </div>
        </div>
        <div class="setting-group">
          <label class="setting-label" data-i18n="llmModal.apiKey">APIã‚­ãƒ¼</label>
          <input type="password" class="setting-input" id="llmModalApiKey" placeholder="APIã‚­ãƒ¼ã‚’å…¥åŠ›">
          <div class="setting-hint llm-key-hint" id="llmKeyHint"></div>
        </div>
        <div class="setting-group">
          <label class="setting-label" data-i18n="llmModal.model">ãƒ¢ãƒ‡ãƒ«</label>
          <select class="setting-input model-select" id="llmModalModel"></select>
        </div>
        <div class="setting-group" style="margin-top: 1rem; padding: 0.75rem; background: var(--accent-blue); border-radius: 0.5rem; border: 1px solid var(--accent-border-blue);">
          <div style="font-size: 0.8rem; color: var(--text-secondary);" data-i18n="llmModal.hint">
            ğŸ’¡ éŒ²éŸ³ä¸­ã§ã‚‚LLMè¨­å®šã‚’å¤‰æ›´ã§ãã¾ã™ã€‚æ¬¡å›ã®AIå‘¼ã³å‡ºã—ã‹ã‚‰æ–°ã—ã„è¨­å®šãŒé©ç”¨ã•ã‚Œã¾ã™ã€‚
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="closeLLMModalFooterBtn" data-i18n="common.cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
        <button class="btn btn-primary" id="saveLLMModalBtn">ğŸ’¾ <span data-i18n="common.save">ä¿å­˜</span></button>
      </div>
    </div>
  </div>

  <!-- API Key Storage Migration Modal (Issue #41) -->
  <div class="modal-overlay" id="storageMigrationModal" style="display: none;">
    <div class="modal" style="max-width: 450px;">
      <div class="modal-header">
        <h2 data-i18n="config.storage.migrationTitle">APIã‚­ãƒ¼ä¿å­˜æ–¹å¼ãŒå¤‰ã‚ã‚Šã¾ã—ãŸ</h2>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 1rem;" data-i18n="config.storage.migrationBody">
          å®‰å…¨æ€§å‘ä¸Šã®ãŸã‚ã€APIã‚­ãƒ¼ã¯é€šå¸¸ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã®ã¿ä¿æŒã•ã‚Œã¾ã™ã€‚æ¬¡å›ã‹ã‚‰ã©ã†ã—ã¾ã™ã‹ï¼Ÿ
        </p>
        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
          <button class="btn btn-primary" id="migrateToSessionBtn">
            <span data-i18n="config.storage.sessionOnly">ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ã¿ï¼ˆæ¨å¥¨ï¼‰</span>
          </button>
          <button class="btn btn-secondary" id="keepPersistentBtn">
            <span data-i18n="config.storage.persistKeys">ç«¯æœ«ã«ä¿å­˜ã™ã‚‹</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Issue #40: Fatal error modal -->
  <div class="modal-overlay" id="fatalErrorModal" style="display: none;">
    <div class="modal" style="max-width: 400px;">
      <div class="modal-header">
        <h2 data-i18n="app.error.fatalTitle">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 1rem;" data-i18n="app.error.fatalBody">
          äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚éŒ²éŸ³ä¸­ã®å ´åˆã¯è‡ªå‹•åœæ­¢ã•ã‚Œã¾ã—ãŸã€‚
        </p>
        <div style="display: flex; flex-direction: column; gap: 0.75rem;">
          <button class="btn btn-primary" id="resetSessionBtn">
            <span data-i18n="app.error.resetSession">ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆ</span>
          </button>
          <button class="btn btn-secondary" id="reloadPageBtn">
            <span data-i18n="app.error.reloadPage">ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ã‚³ãƒ³ãƒ†ãƒŠ -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Phase 2: ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åœæ­¢ãƒœã‚¿ãƒ³ï¼ˆéŒ²éŸ³ä¸­ã®ã¿è¡¨ç¤ºï¼‰ -->
  <button class="btn btn-danger floating-stop-btn" id="floatingStopBtn">
    â¹ <span data-i18n="app.recording.stop">éŒ²éŸ³åœæ­¢</span>
  </button>

  <!-- Phase 5: ä¼šè­°ä¸­ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ãƒœã‚¿ãƒ³ï¼ˆéŒ²éŸ³ä¸­ã®ã¿è¡¨ç¤ºï¼‰ -->
  <button class="btn meeting-mode-toggle" id="meetingModeToggle">
    ğŸ¯ <span data-i18n="app.meeting.modeButton">ä¼šè­°ä¸­ãƒ¢ãƒ¼ãƒ‰</span>
  </button>

  <!-- Phase 5: ä¼šè­°ä¸­ãƒ¢ãƒ¼ãƒ‰ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
  <div class="meeting-mode-overlay" id="meetingModeOverlay">
    <div class="meeting-mode-status">
      <div class="meeting-mode-icon">ğŸ”´</div>
      <div class="meeting-mode-text" id="meetingModeStatusText" data-i18n="app.meeting.recording">éŒ²éŸ³ä¸­</div>
      <div class="meeting-mode-time" id="meetingModeTime">00:00:00</div>
      <div class="meeting-mode-hint" data-i18n="app.meeting.focusHint">ä¼šè­°ã«é›†ä¸­ã—ã¦ãã ã•ã„</div>
    </div>
    <button class="btn btn-danger meeting-mode-stop-btn" id="meetingModeStopBtn">
      â¹ <span data-i18n="app.recording.stop">éŒ²éŸ³åœæ­¢</span>
    </button>
    <button class="meeting-mode-exit-btn" id="meetingModeExitBtn">
      â† <span data-i18n="app.meeting.returnButton">é€šå¸¸ç”»é¢ã«æˆ»ã‚‹</span>
    </button>
  </div>

  <script src="js/debug.js"></script>
  <script src="js/i18n.js"></script>
  <script src="js/theme.js"></script>
  <script src="js/secure-storage.js" defer></script>
  <script src="js/history-store.js" defer></script>
  <!-- STT ProvideræŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ -->
  <script src="js/audio/pcm_stream.js" defer></script>
  <script src="js/audio/recording_monitor.js" defer></script>
  <script src="js/stt/index.js" defer></script>
  <script src="js/stt/providers/openai_chunked.js" defer></script>
  <script src="js/stt/providers/deepgram_ws.js" defer></script>
  <!-- ãƒ•ã‚¡ã‚¤ãƒ«æŠ½å‡º -->
  <script src="js/file-extractor.js" defer></script>
  <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª -->
  <script src="js/app.js" defer></script>
</body>
</html>
